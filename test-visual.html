<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å“ªå’ä¸»é¢˜è§†è§‰å…ƒç´ æµ‹è¯•</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body data-theme="nezha">
    <!-- äº‘æœµè£…é¥° -->
    <div class="cloud-decoration">â˜ï¸</div>
    <div class="cloud-decoration">â˜ï¸</div>
    <div class="cloud-decoration">â˜ï¸</div>

    <div id="game-container">
        <!-- æ¸¸æˆæ ‡é¢˜å’ŒUI -->
        <header class="game-header">
            <h1 class="game-title">å“ªå’2048</h1>
            <div class="score-container">
                <div class="score-box">
                    <div class="score-label">åˆ†æ•°</div>
                    <div id="current-score" class="score-value">12800</div>
                </div>
                <div class="score-box">
                    <div class="score-label">æœ€é«˜åˆ†</div>
                    <div id="high-score" class="score-value">25600</div>
                </div>
            </div>
        </header>

        <!-- æŠ€èƒ½æ  -->
        <div class="skills-container">
            <div class="skill-item" id="skill-three-heads" title="ä¸‰å¤´å…­è‡‚">
                <div class="skill-icon">ğŸ”¥</div>
                <div class="skill-cooldown"></div>
            </div>
            <div class="skill-item" id="skill-qiankun-circle" title="ä¹¾å¤åœˆ">
                <div class="skill-icon">â­•</div>
                <div class="skill-cooldown"></div>
            </div>
            <div class="skill-item" id="skill-huntian-ling" title="æ··å¤©ç»«">
                <div class="skill-icon">ğŸŒŠ</div>
                <div class="skill-cooldown"></div>
            </div>
            <div class="skill-item" id="skill-transformation" title="å“ªå’å˜èº«">
                <div class="skill-icon">âš¡</div>
                <div class="skill-cooldown"></div>
            </div>
        </div>

        <!-- æ¸¸æˆä¸»åŒºåŸŸ -->
        <div class="game-area">
            <canvas id="game-canvas" width="400" height="400"></canvas>
            <div id="game-grid" class="game-grid breathing">
                <!-- ç¤ºä¾‹æ–¹å— -->
                <div class="tile tile-2" style="position: absolute; left: 2%; top: 2%; width: 21%; height: 21%;">
                    <div class="tile-content">ğŸª·</div>
                </div>
                <div class="tile tile-4" style="position: absolute; left: 27%; top: 2%; width: 21%; height: 21%;">
                    <div class="tile-content">ğŸ”¥</div>
                </div>
                <div class="tile tile-8" style="position: absolute; left: 52%; top: 2%; width: 21%; height: 21%;">
                    <div class="tile-content">ğŸŒŠ</div>
                </div>
                <div class="tile tile-16" style="position: absolute; left: 77%; top: 2%; width: 21%; height: 21%;">
                    <div class="tile-content">â­•</div>
                </div>
                
                <div class="tile tile-32" style="position: absolute; left: 2%; top: 27%; width: 21%; height: 21%;">
                    <div class="tile-content">âš¡</div>
                </div>
                <div class="tile tile-64" style="position: absolute; left: 27%; top: 27%; width: 21%; height: 21%;">
                    <div class="tile-content">ğŸ—¡ï¸</div>
                </div>
                <div class="tile tile-128" style="position: absolute; left: 52%; top: 27%; width: 21%; height: 21%;">
                    <div class="tile-content">ğŸ‘‘</div>
                </div>
                <div class="tile tile-256" style="position: absolute; left: 77%; top: 27%; width: 21%; height: 21%;">
                    <div class="tile-content">ğŸ‰</div>
                </div>
                
                <div class="tile tile-512" style="position: absolute; left: 2%; top: 52%; width: 21%; height: 21%;">
                    <div class="tile-content">ğŸ”±</div>
                </div>
                <div class="tile tile-1024" style="position: absolute; left: 27%; top: 52%; width: 21%; height: 21%;">
                    <div class="tile-content">ğŸŒŸ</div>
                </div>
                <div class="tile tile-2048" style="position: absolute; left: 52%; top: 52%; width: 21%; height: 21%;">
                    <div class="tile-content">ğŸ‘¼</div>
                </div>
                <div class="tile tile-4096" style="position: absolute; left: 77%; top: 52%; width: 21%; height: 21%;">
                    <div class="tile-content">ğŸŒˆ</div>
                </div>
                
                <div class="tile tile-8192" style="position: absolute; left: 2%; top: 77%; width: 21%; height: 21%;">
                    <div class="tile-content">âœ¨</div>
                </div>
            </div>
            <!-- ç‰¹æ•ˆå®¹å™¨ -->
            <div id="effects-container" class="effects-container"></div>
        </div>

        <!-- æ¸¸æˆæ§åˆ¶æŒ‰é’® -->
        <div class="game-controls">
            <button id="new-game-btn" class="control-btn primary">æ–°æ¸¸æˆ</button>
            <button id="pause-btn" class="control-btn">æš‚åœ</button>
            <button id="settings-btn" class="control-btn">è®¾ç½®</button>
        </div>

        <!-- ç§»åŠ¨è®¾å¤‡æ“ä½œæç¤º -->
        <div class="mobile-instructions">
            <p>æ»‘åŠ¨å±å¹•ç§»åŠ¨æ–¹å—ï¼Œåˆå¹¶ç›¸åŒæ•°å­—ï¼</p>
        </div>
    </div>

    <script>
        // ç®€å•çš„æµ‹è¯•è„šæœ¬
        document.addEventListener('DOMContentLoaded', function() {
            console.log('å“ªå’ä¸»é¢˜è§†è§‰å…ƒç´ æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            
            // æµ‹è¯•æŠ€èƒ½æŒ‰é’®ç‚¹å‡»æ•ˆæœ
            const skillItems = document.querySelectorAll('.skill-item');
            skillItems.forEach((item, index) => {
                item.addEventListener('click', function() {
                    const skillNames = ['three-heads-active', 'qiankun-active', 'huntian-active', 'transformation-active'];
                    const className = skillNames[index];
                    
                    item.classList.add(className);
                    setTimeout(() => {
                        item.classList.remove(className);
                    }, 2000);
                });
            });
            
            // æµ‹è¯•åˆ†æ•°åŠ¨ç”»
            const scoreElement = document.getElementById('current-score');
            setInterval(() => {
                scoreElement.classList.add('score-increase');
                setTimeout(() => {
                    scoreElement.classList.remove('score-increase');
                }, 600);
            }, 3000);
            
            // æµ‹è¯•åˆå¹¶ç‰¹æ•ˆ
            const gameArea = document.querySelector('.game-area');
            setInterval(() => {
                createTestMergeEffect();
            }, 5000);
            
            function createTestMergeEffect() {
                const effect = document.createElement('div');
                effect.className = 'tile-merge-effect merge-fire';
                effect.style.cssText = `
                    left: ${200 + Math.random() * 100}px;
                    top: ${200 + Math.random() * 100}px;
                    transform: translate(-50%, -50%);
                `;
                
                // åˆ›å»ºç«ç„°ç²’å­
                for (let i = 0; i < 8; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'fire-particle';
                    particle.style.cssText = `
                        left: ${Math.random() * 40 - 20}px;
                        top: ${Math.random() * 40 - 20}px;
                        animation-delay: ${Math.random() * 0.5}s;
                    `;
                    effect.appendChild(particle);
                }
                
                gameArea.appendChild(effect);
                
                setTimeout(() => {
                    if (effect.parentNode) {
                        effect.parentNode.removeChild(effect);
                    }
                }, 2000);
            }
        });
    </script>
</body>
</html>